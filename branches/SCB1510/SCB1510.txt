= Enhancement SCB1510: Provide implementation of blocking dependencies =

[http://www.solitone.org/scarab/issues/id/SCB1510 SCB1510 in Scarab's self tracker]
[http://svn.collab.net/repos/scarab/branches/SCB1510/SCB1510.txt Branch documentation]

== The problem ==

Scarab does provide the notion of "blocking dependencies", but they
are no more than a relationship between issues, not imposing any
contraint over neither of both related issues.

This enhancement intend to allow administrators to define when should any issue block those who
dependeng on it, and what should a blocked issue get restricted because of that state.

== The solution ==

This enhancement introduces two semantics in the Scarab system:
 * "Blocking": A blocking condition can be defined for any *issue type* in a given module. Any issue of this type in the module will be "blocking" whenever its values fulfill the condition.
 * "Blocked": An issue is "blocked" when it depends, via a "is blocked by" dependency (already possible in Scarab), of a "blocking" issue, as defined above.

=== What are the implications of being "blocked" ===
The "blocked" state is just a generic flag for the issue. Its real implications will depend on other
parts of the scarab taking this fact in account.
In the definition of transitions, we'll consider this fact (an issue being "blocked") to disable
a transition. This way, a "blocked" issue will have some of its transitions restricted, always
depending on the configuration of the system.

=== Should a "blocked condition" be implicitly considered "blocking"...? ===
... or should it only be "blocking" if the "blocking condition" for its issue type and module is
fulfilled?

The short answer is ''no''. Though it might initially seems "easier", this simplification only makes
sense when the dependencies are between issues of the same issuetype and in the same module.

So the long answer is '''''no, a blocked issue is not implicitly blocking, because
the propagation of the blocking meaning should only depend on the "blocking condition" of the
blocked issuetype'''''.

=== Doubts, open issues, ... ===
 1. Should the blocking tree show issues that are not currently "blocking", or should it limit itself to those issues that are being blocked *now* because of the other issues' state?
 1. Is this information important enough to be in the "frontpage" of the issue, or should be "hidden" in the fourth tab?
 1. The list of blocked issues should only show anything if current issues is "blocking".

=== Presentation proposal ===
 1. New Tab "Dependencies", will contain dependency info, showing the blocking tree if the issue is blocked, and showing also the blocked issues list.
 1. "Dependencies" title should state both the number of total dependencies and the number of currently blocking issues. Examples: "3 Dependencies / 2 blocking" if the issue is currently blocked by two issues, or just "3 Dependencies" if the issue is not currently blocked.
 1. Tab1 should clearly state if the Issue is BLOCKED, maybe with a link to the "Dependencies" tab.
 1. Current "Attachments / Dependencies / URL" tab will become just "Attachments / URLs". Dependencies information will get into the new "Dependencies" tab.

== Implementation Changes ==

 1. Blocking condition can be defined for an issue type in a module (reusing existing ConditionEdit.vm)
 1. Added methods ''isBlocking()'', ''isBlocked()'', ''getBlockingIssues()'' and ''getBlockedIssues()'' to Issue.java
 1. ViewIssueTab1.vm now include a blocking tree for the issue, and a list of blocked issues.
 1. Disabled_if_blocked can now be managed in the transition definition subscreen.
 1. Loops are avoided in the creation of the tree, though they're allowed in the definition of the dependencies. We simply stop drawing the tree if we detect that a given issue has already been drawn.
