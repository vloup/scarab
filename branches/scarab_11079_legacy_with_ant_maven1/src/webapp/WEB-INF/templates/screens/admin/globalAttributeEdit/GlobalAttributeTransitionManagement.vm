          ## Transition management
          ##
          #datatitle ($l10n.TransitionsTitle)

          <div class="colbar">
            $l10n.TransitionsExplanation1<br/>
            $l10n.TransitionsExplanation2<br/>
            $l10n.TransitionsExplanation3<br/>
            $l10n.DisabledIfBlockedExplanation
          </div>

          <table width="100%" border="1" cellspacing="2" cellpadding="3">
            #set ($transitions = $attribute.transitions)
            <tr><th>$l10n.Delete</th><th>$l10n.TransitionsFrom</th><th>$l10n.TransitionsTo</th><th>$l10n.TransitionsRoleNeeded</th><th valign="middle" colspan="2">$l10n.TransitionsRequiredConditions</th><th valign="middle" colspan="2">$l10n.TransitionDisabledIfBlocked</th></tr>

            #foreach ($transition in $transitions)
              #set ($transitionId = $transition.transitionId)
              <tr>
                #indexedRows($velocityCount)
                 <td><input type="checkbox" name="trans_delete_$transition.transitionId"></td>

                 <td>
                   #if ($transition.from.optionId == 0)
                     $l10n.TransitionsEmptyOption
                   #else 
                     #if ($transition.from.Name)
                       $transition.from.Name
                     #else
                       $l10n.TransitionsAnyOption
                     #end
                   #end
                 </td>

                 <td>
                   #if ($transition.to.optionId == 0)
                     $l10n.TransitionsEmptyOption
                   #else 
                     #if ($transition.to.Name)
                       $transition.to.Name
                     #else
                       $l10n.TransitionsAnyOption
                     #end
                   #end
                 </td>

                 <td>
                   #if ($transition.Role.Name)
                     $transition.Role.Name
                   #else
                     $l10n.TransitionsAnyRole
                   #end
                </td>

                <td>
                  #if ($transition.isConditioned())
                    #set ($requiredOptions = $transition.Conditions)
                    #foreach ($o in $requiredOptions)
                      $o.attributeOption.attribute.name = $o.attributeOption.name<br/>
                    #end   
                    #set ($conditionsLink = $link.setPage("admin,ConditionEdit.vm").addPathInfo("$scarabG.Constant.CANCEL_TEMPLATE","admin,GlobalAttributeEdit.vm").addPathInfo("obj_type", $scarabG.Constant.GLOBAL_ATTRIBUTE_OBJECT).addPathInfo("attId", $attribute.attributeId))
                  #else
                   <em>No conditions defined.</em>
                  #end
                  #if ($transition.isConditioned())
                    #set ($msgCondition = $l10n.EditConditions)
                  #else
                    #set ($msgCondition = $l10n.AddConditions)
                  #end
                  $link.init($data)
                </td>

                <td>
                  <input type="button" value="$l10n.EditConditions" onClick="location.href='$link.setPage("admin,ConditionEdit.vm").addPathInfo("$scarabG.Constant.CANCEL_TEMPLATE","admin,GlobalAttributeEdit.vm").addPathInfo("obj_type", $scarabG.Constant.TRANSITION_OBJECT).addPathInfo("attId", $attribute.attributeId).addPathInfo("transition_id", $transition.transitionId)'" />
                </td>

                <td>
                  <input type="hidden" name="trans_disabled_value_$transition.transitionId" value="$transition.DisabledIfBlocked">
                  <input type="checkbox" name="trans_disabled_new_$transition.transitionId" #if ($transition.DisabledIfBlocked) checked="checked" #end>
                </td>
              </tr>
            #end

            <tr>
              #indexedRows($velocityCount)
              <td>$l10n.New</td>

              <td>
                #set ($froms = $scarabR.Attribute.AttributeOptions)
                <select name="trans_new_FromId">
                  <option selected="selected" value="choose" >$l10n.Choose</option>
                  <option value="0" >$l10n.TransitionsEmptyOption</option>
                  <option value="-1" >$l10n.TransitionsAnyOption</option>
                  #foreach ($f in $froms)
                    #if ($f.deleted == false)
                      <option value="$f.OptionId">$f.Name</option>
                    #end
                  #end
                </select>
              </td>

              <td>
                #set ($tos = $scarabR.Attribute.AttributeOptions)
                <select name="trans_new_ToId">
                  <option selected="selected" value="choose" >$l10n.Choose</option>      
                  <option value="0" >$l10n.TransitionsEmptyOption</option>
                  <option value="-1" >$l10n.TransitionsAnyOption</option>
                  #foreach ($t in $tos)
                    #if ($t.deleted == false)
                      <option value="$t.OptionId">$t.Name</option>
                    #end
                  #end
                </select>
              </td>

              <td>
                <select name="trans_new_RoleId">
                  <option selected="selected" value="choose" >$l10n.Choose</option>      
                  <option value="-1" >$l10n.TransitionsAnyRole</option>
                  #foreach ($role in $securityAdmin.Roles)
                    <option value="$role.RoleId">$role.Name</option>
                  #end
                </select>
              </td>

              <td colspan="3">&nbsp;</td>
            </tr>

          </table>

          <div class="functnbar3">
            <input type="submit" value="$l10n.Save"  name="eventSubmit_doSavetransitiondata" />
            <input type="submit" value="$l10n.Delete"  name="eventSubmit_doDeletetransitiondata" />
          </div>

          ## End of transition management
