<!-- $Id -->
<chapter>
	<title>Maven</title>
	<abstract>
		<simpara>La plupart des utilisateurs de Scarab se servent probablement de ant pour construire Scarab. En tant que développeur, vous aurez  besoin de Maven pour avoir accès à toutes les fonctionnalités de développement, notamment la génération de la documentation.</simpara>
	</abstract>
	<sect1>
		<title>Maven 1</title>
		<simpara>Bien que Maven 2 prenne de la vitesse et soit devenu la version officielle depuis fin 2005, Scarab utilise toujours Maven 1.</simpara>
		<simpara>Maven 1 et Maven 2 sont à peu près équivalents d'un point de vue fonctionnel mais ils ne sont pas syntaxiquement compatibles et utilisent des fichiers de build différents.</simpara>
		<para>Il vous faudra donc installer Maven 1 et vous référer à la documentation de Maven 1 à cette URL: <ulink url="http://maven.apache.org/maven-1.x/">http://maven.apache.org/maven-1.x/</ulink>
		</para>
	</sect1>
	<sect1>
		<title>Construire Scarab avec Maven</title>
		<sect2>
			<title>Build normal</title>
			<simpara>Allez dans le répertoire <computeroutput>$SCARAB_ROOT</computeroutput>
			</simpara>
			<simpara>Lancez Maven de la manière suivante&nbsp;:</simpara>
			<simpara>maven war<computeroutput/>
			</simpara>
		</sect2>
		<sect2>
			<title>Build abrégé</title>
			<simpara>Allez dans le répertoire <computeroutput>$SCARAB_ROOT</computeroutput>
			</simpara>
			<simpara>Lancez Maven de la manière suivante&nbsp;:</simpara>
			<simpara>maven war -Dmaven.test.skip<computeroutput/>
			</simpara>
			<simpara>
				<computeroutput>-Dmaven.test.skip</computeroutput> évite d'exécuter les tests unitaires. Comme les tests sont conçus pour être exécutés avec une base de données, il est possible qu'ils échouent si la vôtre n'est pas encore configurée.</simpara>
		</sect2>
		<sect2>
			<title>Exécuter les tests</title>
			<simpara>Si vous lancez les tests à présent, ils s'exécuteront sur la base de données que vous avez configurée. Tapez simplement</simpara>
			<simpara>
				<computeroutput>maven test</computeroutput>
			</simpara>
			<simpara>Le résultat des tests sera disponible dans <computeroutput>$(SCARAB_HOME)/target/test-results/</computeroutput>.</simpara>
			<simpara>Si vous souhaitez exécuter les tests dans un autre environnement de base de données, procédez comme suit&nbsp;:</simpara>
			<orderedlist>
				<listitem>
					<simpara>
						<computeroutput>maven clean</computeroutput> (il vaut mieux partir sur une base saine pour exécuter les tests)</simpara>
				</listitem>
				<listitem>
					<simpara>Configurez votre fichier <computeroutput>build.properties</computeroutput> pour qu'il contienne au moins la valeur correcte de la propriété <computeroutput>scarab.database.type value</computeroutput>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<computeroutput>maven war</computeroutput>
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						<computeroutput>maven scarab:create-db</computeroutput> (assurez-vous de choisir la même base qu'auparavant!)</simpara>
				</listitem>
				<listitem>
					<simpara>
						<computeroutput>maven test</computeroutput>
					</simpara>
				</listitem>
			</orderedlist>
		</sect2>
	</sect1>
</chapter>
