#*
 * This template assumes it will get in the context:
 * o $issue: The issue on the notification is created
 * o $link: Scarab link tool
 * o $boundary: MIME multi-part boundary marker
 * o $creators: Set with the different users whose activity is reported
 * o $firstNotification: The older notificationstatus of this report
 * o $lastNotification: The younger notificationstatus of this report
 * o $ActivityIssue: General issue activities to be reported
 * o $ActivityPersonnelChanges: Personnel changes to be notified
 * o $ActivityAttributeChanges:
 * o $ActivityAssociatedInfo: URL/Attachment changes
 * o $ActivityDependencies: Dependency changes
 * o $ActivityComments: Comments generated during this report's scope
 * o $multipleActivity: "true" or "false", depending on the notification scoping
 *   several activities or just one.
*#
#set ($issueURL    = $link.getIssueIdLink($issue))
#set ($user        = $issue.ModifiedBy)
#set ($defaultText = $issue.DefaultText)
#set ($module      = $issue.Module)
#set ($issueType   = $issue.issueType)
#set ($rmit        = $module.getRModuleIssueType($issueType))
#markup('b')$issue.UniqueId [$rmit.displayName] - $issue.DefaultText.trim()#markup('b')
#if ($ActivityReasons.size() > 0)
$cr
-------------------------------------------------------------------------------
#markup('b')$l10n.ActivityReasons#markup('b')
${cr}-------------------------------------------------------------------------------
#foreach ($reason in $ActivityReasons)
  - $reason
#end
#end
#if ($ActivityIssue)

#foreach ($not in $ActivityIssue)
** $not.Activity.getDescription($l10n) **
#end
#end
#if ($ActivityPersonnelChanges)
$cr
-------------------------------------------------------------------------------
#markup('b')$l10n.ActivityPersonnelChanges#markup('b')
${cr}-------------------------------------------------------------------------------
#foreach ($not in $ActivityPersonnelChanges)
#set ($displayName = $not.Activity.getDisplayName(l10n) )
#set ($newValue    = $not.Activity.getNewValue(l10n) )
#set ($oldValue    = $not.Activity.getOldValue(l10n) )
  - $displayName: #if ($oldValue.length() > 0 && $oldValue.length()+$newValue.length() < 70) $oldValue -->#end #if ($newValue.length() > 0)$newValue #else(${l10n.Deleted}) #end #if ($oldValue.length() == 0)   ($l10n.New) #end

#end
#end
#if ($ActivityAttributeChanges)
$cr
-------------------------------------------------------------------------------
#markup('b')$l10n.ActivityAttributeChanges#markup('b')
${cr}-------------------------------------------------------------------------------
#foreach ($not in $ActivityAttributeChanges)
#set ($displayName = $not.Activity.getDisplayName(l10n) )
#set ($newValue    = $not.Activity.getNewValue(l10n) )
#set ($oldValue    = $not.Activity.getOldValue(l10n) )
#if ($not.Activity.Attribute.AttributeType.Name == "long-string")
  - $displayName:
    "$newValue"
#else
  - $displayName: #if ($oldValue.length() > 0 && $oldValue.length()+$newValue.length() < 70) $oldValue -->#end #if ($newValue.length() > 0)$newValue #else(${l10n.Deleted}) #end #if ($oldValue.length() == 0)   ($l10n.New) #end

#end
#end
#end
#if ($ActivityAssociatedInfo)
$cr
-------------------------------------------------------------------------------
#markup('b')$l10n.ActivityAssociatedInfo#markup('b')
${cr}-------------------------------------------------------------------------------
#foreach ($not in $ActivityAssociatedInfo)
  - $not.Activity.getDescription($l10n)
#end
#end
#if ($ActivityDependencies)
$cr
-------------------------------------------------------------------------------
#markup('b')$l10n.ActivityDependencies#markup('b')
${cr}-------------------------------------------------------------------------------
#foreach ($not in $ActivityDependencies)
  - $not.Activity.getDescription($l10n)
#end
#end
#if ($ActivityComments)
$cr
#if ($ActivityComments.size() > 1)
-------------------------------------------------------------------------------
#markup('b')$l10n.ActivityComments#markup('b')
#end
#foreach ($not in $ActivityComments)
#if ($ActivityComments.size() > 1)
${cr}-------------------------------------------------------------------------------
#end
#markup('b')${l10n.Comment} $not.Creator.Name#markup('b')$cr
$not.Activity.Attachment.Data
#end
#end
${cr}-------------------------------------------------------------------------------
#if ($multipleActivity)
$l10n.ActivitiesGeneratedBy
#foreach ($creat in $creators)
  - $creat.Name ($creat.Email)
#end
  $l10n.ActivityBetween $firstNotification.getActivityCreationDate($l10n) $l10n.ActivityAnd $lastNotification.getActivityCreationDate($l10n).
#else
${l10n.ActivityGeneratedBy} #foreach ($creat in $creators)$creat.Name ($creat.Email)#end $l10n.ActivityAt $firstNotification.getActivityCreationDate($l10n)${cr}
#end
[$module.Name]: $issueURL
