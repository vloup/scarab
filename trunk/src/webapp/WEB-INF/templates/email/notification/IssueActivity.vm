#*
 * This template assumes it will get in the context:
 * o $issue: The issue on the notification is created
 * o $link: Scarab link tool
 * o $boundary: MIME multi-part boundary marker
 * o $creators: Set with the different users whose activity is reported
 * o $firstNotification: The older notificationstatus of this report
 * o $lastNotification: The younger notificationstatus of this report
 * o $ActivityIssue: General issue activities to be reported
 * o $ActivityPersonnelChanges: Personnel changes to be notified
 * o $ActivityAttributeChanges:
 * o $ActivityAssociatedInfo: URL/Attachment changes
 * o $ActivityDependencies: Dependency changes
 * o $ActivityComments: Comments generated during this report's scope
 * o $multipleActivity: "true" or "false", depending on the notification scoping
 *   several activities or just one.
*#
#set ($issueURL    = "$link.getIssueIdLink($issue)")
#set ($user        = $issue.ModifiedBy)
#set ($defaultText = $issue.DefaultText)
#set ($module      = $issue.Module)
#set ($issueType   = $issue.issueType)
#set ($rmit        = $module.getRModuleIssueType($issueType))
#markup('b') $issue.UniqueId ($rmit.displayName) - $issue.DefaultText #markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#if ($multipleActivity)
$l10n.ActivitiesGeneratedBy
#foreach ($creat in $creators)
  - $creat.Name ($creat.Email)
#end
  $l10n.ActivityBetween $firstNotification.getActivityCreationDate($l10n) $l10n.ActivityAnd $lastNotification.getActivityCreationDate($l10n).
#else
${l10n.ActivityGeneratedBy}
#foreach ($creat in $creators) $creat.Name ($creat.Email)#end $l10n.ActivityAt $firstNotification.getActivityCreationDate($l10n)
#end

#if ($ActivityReasons && $ActivityReasons.size > 0 )
$cr
-------------------------------------------------------------------------------$cr
#markup('b')$l10n.ActivityReasons#markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#foreach ($reason in $ActivityReasons)
  - $reason
#end
#end
#if ($ActivityIssue)

#foreach ($not in $ActivityIssue)
** $not.Activity.getDescription($l10n) **
#end
#end
#if ($ActivityPersonnelChanges)
$cr
-------------------------------------------------------------------------------$cr
#markup('b')$l10n.ActivityPersonnelChanges#markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#foreach ($not in $ActivityPersonnelChanges)
  - $not.Activity.getDescription($l10n)
#end
#end
#if ($ActivityAttributeChanges)
$cr
-------------------------------------------------------------------------------$cr
#markup('b')$l10n.ActivityAttributeChanges#markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#foreach ($not in $ActivityAttributeChanges)
#if ($not.Activity.Attribute.AttributeType.Name == "long-string")
  - $l10n.format("AttributeSetTo", $not.Activity.DisplayName):
    "$not.Activity.NewValue"
#else
  - $not.Activity.getDescription($l10n)
#end
#end
#end
#if ($ActivityAssociatedInfo)
$cr
-------------------------------------------------------------------------------$cr
#markup('b')$l10n.ActivityAssociatedInfo#markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#foreach ($not in $ActivityAssociatedInfo)
  - $not.Activity.getDescription($l10n)
#end
#end
#if ($ActivityDependencies)
$cr
-------------------------------------------------------------------------------$cr
#markup('b')$l10n.ActivityDependencies#markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#foreach ($not in $ActivityDependencies)
  - $not.Activity.getDescription($l10n)
#end
#end
#if ($ActivityComments)
$cr
-------------------------------------------------------------------------------$cr
#markup('b')$l10n.ActivityComments#markup('b')$cr
-------------------------------------------------------------------------------$cr
$cr
#foreach ($not in $ActivityComments)
$not.Activity.Attachment.Data
($not.Creator.Name)
$cr
#end
#end
$cr
-------------------------------------------------------------------------------$cr
[$module.Name]: $issueURL