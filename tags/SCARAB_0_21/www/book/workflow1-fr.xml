<!-- $Id$ -->
<chapter>
	<title>Workflow</title>
	<sect1>
		<title>Introduction</title>
		<simpara>Le workflow a été un sujet de débats passionnés depuis que Scarab existe.  Dans un premier sens, le plus léger, le terme &quot;workflow&quot; désigne le fait d'imposer certains états aux fiches sur base de la valeur de leurs attributs, de leur &quot;état&quot; comme on dit couramment, ou d'autres conditions. Dans un second sens, le workflow désigne l'interaction ou l'intégration entre Scarab et d'autres systèmes ou processus.</simpara>
		<simpara>Dans Scarab, les workflows sont &quot;enfichables&quot; &dash; vous pouvez retirer le workflow installé par défaut et installer le vôtre à sa place. Jusqu'à la version b19, l'option par défaut était de ne pas avoir de workflow. En fait, il y avait un workflow simple appelé DefaultWorkflow qui ne faisait rien et permettait toutes les transitions. A partir de la version b20, le workflow par défaut est un workflow de base appelé &apos;BasicWorkflow&apos;, dont le comportement est expliqué ci-dessous.</simpara>
		<note>
			<title>Changer de workflow</title>
			<simpara>Si vous désirez changer de workflow pour en utiliser un autre ou concevoir le vôtre, reportez-vous au chapitre <emphasis>Workflow</emphasis> du <emphasis>Guide de développement</emphasis>.</simpara>
		</note>
	</sect1>
	<sect1>
		<title>BasicWorkflow</title>
		<simpara>Les fonctionnalités fournies par <emphasis>BasicWorkflow</emphasis> se rattachent au premier sens donné ci-dessus au terme workflow.</simpara>
		<sect2>
			<title>Gestion des transitions d'états</title>
			<simpara>Le concept d'&quot;état&quot; d'une fiche dans Scarab est lié habituellement à un ou plusieurs attributs. Tout attribut choisi dans une liste peut être considéré comme caractérisant l'&quot;état&quot; de la fiche à laquelle il appartient. D'une certaine manière, c'est vrai aussi des autres types d'attributs mais ceux que l'on choisit dans une liste sont mieux adaptés à cet usage parce qu'il y a un ensemble bien défini de valeurs.</simpara>
			<simpara>Bien que ceci ait toujours été vrai dans Scarab, l'absence de restrictions sur les transitions était souvent source de confusion parce que Scarab, sans workflow, ne faisait rien pour imposer un processus défini.</simpara>
			<simpara>Avec les fonctionnalités du workflow <emphasis>BasicWorkflow</emphasis>, vous pouvez définir un workflow de transitions d'état pour un attribut choisi dans une liste déroulante, ce qui vous permet de définir les valeurs qu'un attribut peut prendre à partir de sa valeur courante et le Rôle que l'utilisateur doit exercer pour pouvoir effectuer cette modification.</simpara>
			<simpara>De cette manière, tout utilisateur ne pourra modifier l'attribut caractérisant l'état de la fiche qu'en lui donnant une valeur vers laquelle une transition est possible, sur base de la valeur courante de l'attribut et de ses Rôles.</simpara>
			<sect3>
				<title>Définition de transitions</title>
				<simpara>Les transitions doivent être définies au niveau global, vous devez donc avoir les droits d'administration et vous rendre à l'écran &quot;Administration - Données globales - Attributs globaux&quot;.</simpara>
				<simpara>Choisissez maintenant l'attribut pour lequel vous voulez définir des transitions, ou créez un nouvel attribut. Pour rappel, il doit être du type liste.</simpara>
				<simpara>En bas de l'écran, notez l'apparition d'une section &quot;Transitions&quot;, dont la première ligne est &quot;Nouvelle&quot;. Tant qu'il n'y a pas d'autres lignes, il n'y a pas de transitions définies pour cet attribut et il se comportera comme n'importe quel attribut de type liste.</simpara>
				<simpara>Si vous voulez définir une transition, choisissez la valeur &quot;depuis&quot;, la valeur &quot;vers&quot; et le Rôle requis pour accomplir cette transition, puis cliquez sur le bouton &quot;Enregistrer&quot;. Si vous voulez supprimer une transition, cochez la case correspondante et cliquez sur le bouton &quot;Supprimer&quot;.</simpara>
				<simpara>Dès que vous avez défini une transition pour un attribut, le comportement par défaut qui permet toutes les transitions est désactivé. Si vous voulez que d'autres transitions soient permises pour un rôle quelconque, vous devez les définir explicitement.</simpara>
				<simpara>Si vous souhaitez définir un état initial, il vous faudra définir une transition à partir de l'état &quot;Option vide&quot; vers cette valeur. Si vous souhaitez qu'un état soit toujours atteignable, définissez une transition depuis &quot;Toute option&quot; vers cette valeur.</simpara>
			</sect3>
		</sect2>
		<sect2>
			<title>Conditions</title>
			<simpara>Les conditions ont été développées dans Scarab pour permettre à l'administrateur de rendre certains comportements conditionnels. En l'état courant du développement (<emphasis>milestone</emphasis> 20), les conditions sont définies en choisissant une ou plusieurs valeurs pour les attributs de type liste. La condition est considérée comme remplie pour une fiche donnée si au moins une des valeurs sélectionnées correspond à l'état de cette fiche.</simpara>
			<simpara>Il est possible d'appliquer des conditions à deux comportements&nbsp;:</simpara>
			<itemizedlist>
				<listitem>
					<simpara>Imposer un attribut (globalement ou par module)</simpara>
				</listitem>
				<listitem>
					<simpara>Les transitions d'état</simpara>
				</listitem>
			</itemizedlist>
			<simpara>Dans le premier cas, l'administrateur peut forcer l'état d'un attribut quand la condition est évaluée comme vraie. Dans le second cas, une transition conditionnée ne sera permise que si la condition est évaluée comme vraie.</simpara>
			<simpara>Dans les deux cas, vous remarquerez un bouton avec le libellé &quot;Editer les conditions&quot;. Lorsque vous le cliquez, vous obtenez un écran dans lequel vous pouvez sélectionner les valeurs pour tous les attributs de type liste qui formeront la condition. Cliquez &quot;Terminer&quot; pour revenir à l'écran précédent, et vous pourrez y lire la condition que vous avez définie.</simpara>
		</sect2>
	</sect1>
</chapter>
