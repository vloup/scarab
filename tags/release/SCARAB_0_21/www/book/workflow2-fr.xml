<chapter>
	<title>Workflow</title>
	<sect1>
		<title>Introduction</title>
		<simpara>Comme il a été dit brièvement dans le chapitre <emphasis>Workflow</emphasis> du <emphasis>Guide de l'utilisateur</emphasis>, Scarab n'a pas de workflow &quot;codé en dur&quot;. Les transitions d'état lors de l'enregistrement des fiches sont toutes permises, et cela n'entraîne pas non plus d'interaction avec quelque système externe que ce soit.</simpara>
		<simpara>Examinons brièvement comment ceci est implémenté.</simpara>
	</sect1>
	<sect1>
		<title>Les workflows dans Scarab</title>
		<simpara>Techniquement, un workflow est toute classe java qui implémente l'interface <computeroutput>org.tigris.scarab.workflow.Workflow</computeroutput> (le code source de cette interface se trouve sous <computeroutput>src/java</computeroutput>).</simpara>
		<graphic fileref="images/uml-workflows.png" align="center"/>
		<simpara>Le workflow est instancié dynamiquement par Turbine sur base d'une déclaration dans <computeroutput>Scarab.properties</computeroutput> (ce fichier se trouve à l'exécution dans l'arborescence de l'application web sous <computeroutput>WEB-INF/conf</computeroutput>).</simpara>
			<programlisting>
<![CDATA[
# The workflow tool
# scarab.workflow.classname=org.tigris.scarab.workflow.DefaultWorkflow
scarab.workflow.classname=org.tigris.scarab.workflow.CheapWorkflow
]]>
            </programlisting>
	</sect1>
	<sect1>
		<title>DefaultWorkflow</title>
		<simpara>C'est le workflow par défaut pour toutes les versions de Scarab jusqu'à la <emphasis>milestone</emphasis> 19.</simpara>
		<simpara>Ce workflow est implémenté dans la classe <computeroutput>org.tigris.scarab.workflow.DefaultWorkflow</computeroutput>. C'est un bouchon <emphasis>(stub)</emphasis> qui ne fait rien et accepte toutes les transitions.</simpara>
	</sect1>
	<sect1>
		<title>BasicWorkflow</title>
		<simpara>C'est le workflow par défaut pour les versions de Scarab à partir de la <emphasis>milestone</emphasis> 20. Son fonctionnement est expliqué dans le <emphasis>Guide de l'utilisateur</emphasis>.</simpara>
		<simpara>Ce workflow est implémenté dans la classe <computeroutput>org.tigris.scarab.workflow.CheapWorkflow</computeroutput> (malgré les apparences). Il implémente l'interface <emphasis>Workflow</emphasis> indirectement en héritant du workflow par défaut, <computeroutput>DefaultWorkflow</computeroutput> sans doute pour ne pas devoir redéfinir certains comportements par défaut.</simpara>
	</sect1>
	<sect1>
		<title>Définir un nouveau workflow</title>
		<simpara>Pour définir un nouveau workflow, utilisant d'autres mécanismes, communiquant avec un ou plusieurs systèmes externes ou simplement adapté aux besoins et aux processus de votre organisation, il vous suffit donc&nbsp;:</simpara>
		<itemizedlist>
			<listitem>
				<simpara>d'écrire une classe java qui implémente l'interface <computeroutput>org.tigris.scarab.workflow.Workflow</computeroutput> (soit directement, soit en héritant de <computeroutput>org.tigris.scarab.workflow.DefaultWorkflow</computeroutput>);</simpara>
			</listitem>
			<listitem>
				<simpara>de définir le nom de cette classe dans le fichier <computeroutput>Scarab.properties</computeroutput> mentionné plus haut.</simpara>
			</listitem>
		</itemizedlist>
	</sect1>
	<sect1>
		<title>Utilisation de WfmOpen comme moteur de workflow pour Scarab</title>
		<simpara>Quelqu'un a commencé à implémenter une passerelle entre Scarab et le moteur de workflow open-source WfmOpen. Il reste de cette implémentation une entrée sur le <emphasis>tracker</emphasis> de SourceForge à cette URL&nbsp;: <ulink url="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=961620&amp;group_id=76143&amp;atid=546206l">http://sourceforge.net/tracker/index.php?func=detail&amp;aid=961620&amp;group_id=76143&amp;atid=546206</ulink>.</simpara>
		<simpara>L'état de ce développement n'est pas connu.</simpara>
	</sect1>
</chapter>
