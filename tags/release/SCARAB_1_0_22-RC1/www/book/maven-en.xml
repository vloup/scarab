<!-- $Id -->
<chapter>
	<title>Maven</title>
	<abstract>
		<simpara>Though Scarab end-users are more likely to use Ant to build Scarab, as a developer you will need Maven to access all development functionalities, among which documentation generation.</simpara>
	</abstract>
	<sect1>
		<title>Maven 1</title>
		<simpara>Though Maven 2 is getting momentum and has officially become the mainstream version at the end of 2005, Scarab still uses Maven 1.</simpara>
		<simpara>Maven 1 and Maven 2 are functionnally equivalent but they are not syntactically compatible and use different build files.</simpara>
		<para>So you will need to install Maven 1 and refer to the Maven 1 documentation at this URL:  <ulink url="http://maven.apache.org/maven-1.x/">http://maven.apache.org/maven-1.x/</ulink>
		</para>
	</sect1>
	<sect1>
		<title>Building Scarab with Maven</title>
		<sect2>
			<title>Normal (full) build</title>
			<simpara>Go to the <computeroutput>$SCARAB_ROOT</computeroutput> directory.</simpara>
			<simpara>Launch Maven:</simpara>
			<simpara>maven war<computeroutput/>
			</simpara>
		</sect2>
		<sect2>
			<title>Quick build</title>
			<simpara>Go to the <computeroutput>$SCARAB_ROOT</computeroutput> directory.</simpara>
			<simpara>Launch Maven:</simpara>
			<simpara>maven war -Dmaven.test.skip<computeroutput/>
			</simpara>
			<simpara>
				<computeroutput>-Dmaven.test.skip</computeroutput> skips the execution of unit tests.
			  Scarab unit tests have been designed to be executed against a database; if yours is not (yet) configured, they will most certainly fail.
	      </simpara>
		</sect2>
		<sect2>
			<title>Running the tests</title>
			<simpara>Just launch:</simpara>
			<simpara>
				<computeroutput>maven test</computeroutput>
			</simpara>
			<simpara>The results of the tests will be in <computeroutput>$(SCARAB_HOME)/target/test-results/</computeroutput>
			</simpara>
			<simpara>If you'd like to make your tests with another db environment, follow these steps:</simpara>
			<orderedlist>
				<listitem>
					<simpara>
						<computeroutput>maven clean</computeroutput> (you better start from scratch if you gonna test)</simpara>
				</listitem>
				<listitem>
					<simpara>Configure your <computeroutput>build.properties</computeroutput> to contain at least the correct <computeroutput>scarab.database.type</computeroutput> value.</simpara>
				</listitem>
				<listitem>
					<simpara>maven war</simpara>
				</listitem>
				<listitem>
					<simpara>maven scarab:create-db (make sure you choose the same database than before!!)</simpara>
				</listitem>
				<listitem>
					<simpara>maven test</simpara>
				</listitem>
			</orderedlist>
		</sect2>
	</sect1>
</chapter>
